<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cassi</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=EB+Garamond:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
<style>
  /* â”€â”€â”€ RESET & BASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --crimson:   #8B0000;
    --crimson2:  #6B0000;
    --gold:      #C9A96E;
    --gold-light:#E8D5B0;
    --cream:     #FDF6EE;
    --dark:      #1a0505;
    --text:      #2c0808;
  }

  html, body {
    min-height: 100%;
    overflow-x: hidden;
  }

  body {
    background: #0d0202;
    font-family: 'EB Garamond', serif;
    color: var(--cream);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    position: relative;
  }

  /* â”€â”€â”€ HEARTS BACKGROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #hearts-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  /* â”€â”€â”€ MAIN WRAPPER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .page {
    position: relative;
    z-index: 1;
    width: 100%;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
  }

  /* â”€â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .card {
    background: linear-gradient(160deg, #1c0404 0%, #2a0606 60%, #1c0404 100%);
    border: 1px solid rgba(201,169,110,0.25);
    max-width: 520px;
    width: 100%;
    padding: 56px 52px;
    text-align: center;
    position: relative;
    box-shadow:
      0 0 0 1px rgba(201,169,110,0.08),
      0 8px 48px rgba(0,0,0,0.7),
      inset 0 1px 0 rgba(201,169,110,0.15);
  }

  .card::before, .card::after {
    content: '';
    position: absolute;
    width: 28px; height: 28px;
    border-color: var(--gold);
    border-style: solid;
    opacity: 0.5;
  }
  .card::before { top: 14px; left: 14px; border-width: 1px 0 0 1px; }
  .card::after  { bottom: 14px; right: 14px; border-width: 0 1px 1px 0; }

  /* corner decorations */
  .corner-tr, .corner-bl {
    position: absolute;
    width: 28px; height: 28px;
    border-color: var(--gold);
    border-style: solid;
    opacity: 0.5;
  }
  .corner-tr { top: 14px; right: 14px; border-width: 1px 1px 0 0; }
  .corner-bl { bottom: 14px; left: 14px; border-width: 0 0 1px 1px; }

  /* â”€â”€â”€ IMAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .photo-wrap {
    width: 180px; height: 180px;
    margin: 0 auto 32px;
    border-radius: 50%;
    border: 1px solid rgba(201,169,110,0.4);
    overflow: hidden;
    box-shadow: 0 0 30px rgba(139,0,0,0.5), 0 0 0 4px rgba(201,169,110,0.08);
    position: relative;
  }

  .photo-wrap img {
    width: 100%; height: 100%;
    object-fit: cover;
    display: block;
  }

  /* placeholder si pas d'image */
  .photo-placeholder {
    width: 100%; height: 100%;
    background: linear-gradient(135deg, #3a0808, #1c0404);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 64px;
    opacity: 0.6;
  }

  /* â”€â”€â”€ DIVIDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .divider {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 0 auto 28px;
    width: 80%;
  }
  .divider::before, .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(to right, transparent, rgba(201,169,110,0.4));
  }
  .divider::after { background: linear-gradient(to left, transparent, rgba(201,169,110,0.4)); }
  .divider span { color: var(--gold); font-size: 14px; opacity: 0.7; }

  /* â”€â”€â”€ TYPOGRAPHY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .main-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(1.6rem, 4vw, 2.2rem);
    font-weight: 300;
    letter-spacing: 0.05em;
    color: var(--cream);
    line-height: 1.4;
    margin-bottom: 8px;
    transition: all 0.5s ease;
  }

  .subtitle {
    font-size: 0.85rem;
    color: var(--gold);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    opacity: 0.7;
    margin-bottom: 36px;
    font-family: 'Cormorant Garamond', serif;
  }

  /* â”€â”€â”€ BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .btn-row {
    display: flex;
    gap: 16px;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    margin-top: 8px;
    position: static;
    min-height: 60px;
  }

  .btn {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 12px 32px;
    border: 1px solid;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    white-space: nowrap;
  }

  .btn-yes {
    background: transparent;
    border-color: rgba(201,169,110,0.5);
    color: var(--gold-light);
  }
  .btn-yes:hover {
    background: rgba(201,169,110,0.1);
    border-color: var(--gold);
    color: var(--gold);
  }

  .btn-no {
    background: transparent;
    border-color: rgba(201,169,110,0.5);
    color: var(--gold-light);
  }
  .btn-no:hover {
    background: rgba(255,255,255,0.04);
    color: rgba(255,255,255,0.5);
  }

  /* â”€â”€â”€ SCREENS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .screen { display: none; }
  .screen.active { display: flex; }

  /* â”€â”€â”€ INVITATION SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .invite-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(1.4rem, 3.5vw, 2rem);
    font-weight: 300;
    color: var(--gold-light);
    margin-bottom: 8px;
    letter-spacing: 0.04em;
  }

  .invite-date {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.05rem;
    color: var(--gold);
    letter-spacing: 0.1em;
    margin-bottom: 28px;
    font-style: italic;
  }

  .invite-text {
    font-size: 0.95rem;
    color: rgba(253,246,238,0.7);
    line-height: 1.8;
    margin-bottom: 32px;
  }

   /* â”€â”€â”€ CHOICES GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .choices-label {
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.8rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0.7;
    margin-bottom: 16px;
  }

  .choices-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 28px;
  }

  .choice-item {
    border: 1px solid rgba(201,169,110,0.2);
    padding: 14px 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    background: transparent;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    color: rgba(253,246,238,0.6);
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.85rem;
    letter-spacing: 0.05em;
  }

  .choice-item .emoji { font-size: 1.6rem; }

  .choice-item:hover {
    border-color: rgba(201,169,110,0.5);
    background: rgba(201,169,110,0.05);
    color: var(--gold-light);
  }

  .choice-item.selected {
    border-color: var(--gold);
    background: rgba(201,169,110,0.12);
    color: var(--gold-light);
    box-shadow: inset 0 0 0 1px rgba(201,169,110,0.2);
  }

  /* â”€â”€â”€ ACCEPT BTN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .btn-accept {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    padding: 14px 44px;
    border: 1px solid rgba(201,169,110,0.5);
    background: transparent;
    color: var(--gold-light);
    cursor: pointer;
    transition: all 0.25s ease;
    margin-top: 8px;
  }
  .btn-accept:hover {
    background: rgba(201,169,110,0.1);
    border-color: var(--gold);
    color: var(--gold);
  }

  /* â”€â”€â”€ LETTER SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .letter-wrap {
    background: linear-gradient(160deg, #1c0404, #2a0606);
    border: 1px solid rgba(201,169,110,0.2);
    padding: 40px 36px;
    text-align: left;
    position: relative;
  }

  .letter-seal {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 24px;
    animation: pulse 2s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
  }

  .letter-body {
    font-family: 'EB Garamond', serif;
    font-style: italic;
    font-size: 1rem;
    line-height: 1.9;
    color: rgba(253,246,238,0.85);
  }

  .letter-sign {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.4rem;
    font-weight: 300;
    color: var(--gold);
    text-align: right;
    margin-top: 24px;
  }

  /* â”€â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 480px) {
    .card { padding: 40px 28px; }
    .choices-grid { grid-template-columns: repeat(2, 1fr); }
  }

  /* â”€â”€â”€ FADE IN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .fade-in { animation: fadeIn 0.6s ease forwards; }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<canvas id="hearts-canvas"></canvas>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  SCREEN 1 â€” QUESTION                           -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page" id="screen-question">
  <div class="card">
    <div class="corner-tr"></div>
    <div class="corner-bl"></div>

    <!-- ğŸ“¸ IMAGE â€” remplace le src par ton image -->
    <div class="photo-wrap">
      <img id="main-photo" src="ne.jpg" alt="Photo"
           onerror="this.style.display='none'; document.getElementById('ph').style.display='flex';">
      <div class="photo-placeholder" id="ph" style="display:none;">ğŸŒ¹</div>
    </div>

    <div class="divider"><span>â™¥</span></div>

    <p class="main-title" id="question-text">Est ce que tu m'aimes ?</p>
    <p class="subtitle" id="question-sub"></p>

    <div class="btn-row" id="btn-row">
      <button class="btn btn-yes" id="btn-yes" onclick="pressYes()">Oui</button>
      <button class="btn btn-no"  id="btn-no"  onclick="pressNo()">Non</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  SCREEN 2 â€” INVITATION                         -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page screen" id="screen-invite">
  <div class="card">
    <div class="corner-tr"></div>
    <div class="corner-bl"></div>

    <p class="invite-title">Tu es officiellement invitÃ©e âœ¨</p>
    <div class="divider"><span>â™¥</span></div>
    <p class="invite-date">Samedi 7 mars 2026</p>
    <p class="invite-text">Une soirÃ©e rien que pour nous deux. Choisis ce dont tu as envie pour cette nuit-lÃ ...</p>

   <p class="choices-label">Personnalise ta soirÃ©e</p>
    <div class="choices-grid" id="choices-grid">
      <div class="choice-item" data-value="Doro" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ˜</span><span>On Doro</span>
      </div>
      <div class="choice-item" data-value="Film" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ¬</span><span>On Regarde Un Film</span>
      </div>
      <div class="choice-item" data-value="Cuisine entre nous" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ³</span><span>Une Cuisine entre nous</span>
      </div>
      <div class="choice-item" data-value="Action ou VÃ©ritÃ©" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ‘€</span><span>Un Action ou VÃ©ritÃ©</span>
      </div>
      <div class="choice-item" data-value="Discussion Profonde" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ«£</span><span>Une Discussion Profonde</span>
      </div>
      <div class="choice-item" data-value="CrÃ©er une playlist pour nous 2" onclick="toggleChoice(this)">
        <span class="emoji">ğŸµ</span><span>CrÃ©e une playlist musique</span>
      </div>
      <div class="choice-item" data-value="Massage" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ¤</span><span>Je te fait un Massage</span>
      </div>
      <div class="choice-item" data-value="Photos de nous 2" onclick="toggleChoice(this)">
        <span class="emoji">ğŸ“¸</span><span>On fait des photos de nous 2</span>
      </div>
    </div>

    <button class="btn-accept" onclick="acceptInvite()">Accepter l'invitation</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!--  SCREEN 3 â€” LETTRE                             -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="page screen" id="screen-letter">
  <div class="card">
    <div class="corner-tr"></div>
    <div class="corner-bl"></div>
    <div class="letter-wrap">
      <div class="letter-seal">â™¥</div>
      <div class="letter-body" id="letter-body">
        <!-- rempli dynamiquement -->
      </div>
      <div class="letter-sign">RaphaÃ«l â™¥</div>
    </div>
  </div>
</div>

<!-- â”€â”€â”€ MUSIQUE DE FOND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<!-- Tu peux remplacer l'URL par un fichier local ou un lien direct .mp3 -->
<audio id="bg-music" loop>
  <source src="sigue.mp3" type="audio/mpeg">
</audio>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONFIG â€” MODIFIE CES LIGNES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DISCORD_WEBHOOK = "https://discord.com/api/webhooks/1474718736438268046/TvGS8ZlYCFsTW2_weB7K2DuqSeHd1pT_A50ixxowNxj49a6Eym45gskMbl8w-L1qjoT5";

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  Ã‰TAT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let step = 0;
let yesCount = 0;
let noCount  = 0;
let yesBtnScale = 1;

const questions = [
  "Est ce que tu m'aimes ?",
  "Plus que orion ?",
  "T vraiment sÃ»re ?",
  "Wola j'espÃ¨re c vrais !",
  "Sur minette tu mens pas hein ?",
  "Tu ne vas pas changer d'avis ?",
  "Papa sa a mm pas encore coulÃ©",
  "MÃªme si defois je suis un flocko ?",
  "MÃªme si on s'embrouille pour rien ?",
  "Alors tu m'aimes vraiment ?",
];

const noTexts = [
  "T sah la ?",
  "Arrt sa jrigole pas",
  "Ta craquer !",
  "En mode tu t'en fou de moi ?",
  "Wsh puis elle continue",
  "Vzy la stop",
  "Arrt sa tu me kiff trop",
  "Papa sa a mm pas encore coulÃ©",
  "Vzy la stop the car !",
  "Cassi tu m'aimes pas en mode ?",
  "Boufonne ",
  "vzy tg arrt sa",
  "Appuie sur oui la con de ta race",
];

// Le bouton Non reste dans le flux normal au dÃ©part.
// Il passera en fixed uniquement au premier clic (voir pressNo).
function startMusic() {
  const audio = document.getElementById('bg-music');
  audio.volume = 0.07;
  audio.play().catch(() => {});
}
document.body.addEventListener('click', startMusic, { once: true });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HEARTS CANVAS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
  const canvas = document.getElementById('hearts-canvas');
  const ctx    = canvas.getContext('2d');
  let W, H, hearts = [];

  function resize() {
    W = canvas.width  = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  function heart(x, y, size, ctx) {
    ctx.save();
    ctx.translate(x, y);
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.bezierCurveTo(-size/2, -size/2, -size, size/4, 0, size);
    ctx.bezierCurveTo( size,   size/4,   size/2, -size/2, 0, 0);
    ctx.fill();
    ctx.restore();
  }

  for (let i = 0; i < 28; i++) {
    hearts.push({
      x: Math.random() * window.innerWidth,
      y: Math.random() * window.innerHeight,
      size: 5 + Math.random() * 10,
      speedY: 0.2 + Math.random() * 0.5,
      speedX: (Math.random() - 0.5) * 0.3,
      alpha: 0.04 + Math.random() * 0.1,
      wobble: Math.random() * Math.PI * 2,
    });
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    hearts.forEach(h => {
      h.y -= h.speedY;
      h.x += Math.sin(h.wobble) * 0.3;
      h.wobble += 0.01;
      if (h.y < -20) { h.y = H + 20; h.x = Math.random() * W; }
      ctx.globalAlpha = h.alpha;
      ctx.fillStyle = '#C9A96E';
      heart(h.x, h.y, h.size, ctx);
    });
    requestAnimationFrame(draw);
  }
  draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  OUI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function pressYes() {
  yesCount++;
  step++;
  yesBtnScale += 0.12;

  const btnYes  = document.getElementById('btn-yes');
  const btnNo   = document.getElementById('btn-no');
  const qText   = document.getElementById('question-text');
  const qSub    = document.getElementById('question-sub');

  btnYes.style.transform = `scale(${yesBtnScale})`;
  btnYes.style.fontSize  = `${1 + (yesBtnScale - 1) * 0.5}rem`;

  if (step < questions.length) {
    qText.classList.remove('fade-in');
    void qText.offsetWidth;
    qText.classList.add('fade-in');
    qText.textContent = questions[step];
    qSub.textContent  = step > 2 ? `Tu as dit oui ${yesCount} fois...` : '';
  } else {
    // Fin â†’ afficher invitation
    showInvite();
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  NON â€” bouton qui fuit
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let noIsFixed = false;

function pressNo() {
  noCount++;
  const btnNo  = document.getElementById('btn-no');
  const qSub   = document.getElementById('question-sub');

  // Change le texte du sous-titre
  qSub.classList.remove('fade-in');
  void qSub.offsetWidth;
  qSub.classList.add('fade-in');
  qSub.textContent = noTexts[noCount % noTexts.length];
  qSub.style.color = '#c97e7e';

  // Premier clic : on capture la position actuelle et on passe en fixed
  if (!noIsFixed) {
    const rect = btnNo.getBoundingClientRect();
    btnNo.style.position   = 'fixed';
    btnNo.style.left       = rect.left + 'px';
    btnNo.style.top        = rect.top  + 'px';
    btnNo.style.transition = 'left 0.35s ease, top 0.35s ease';
    noIsFixed = true;
    // Force reflow avant de dÃ©placer
    void btnNo.offsetWidth;
  }

  // Fuis !
  const margin = 80;
  const newX = margin + Math.random() * (window.innerWidth  - margin * 2 - 90);
  const newY = margin + Math.random() * (window.innerHeight - margin * 2 - 44);
  btnNo.style.left = newX + 'px';
  btnNo.style.top  = newY + 'px';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AFFICHER INVITATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showInvite() {
  document.getElementById('screen-question').style.display = 'none';
  document.getElementById('btn-no').style.display = 'none';
  const inv = document.getElementById('screen-invite');
  inv.classList.add('active');
  inv.classList.add('fade-in');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CHOIX
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function toggleChoice(el) {
  el.classList.toggle('selected');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ACCEPTER INVITATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function acceptInvite() {
  const selected = [...document.querySelectorAll('.choice-item.selected')]
    .map(el => el.dataset.value);

  if (selected.length === 0) {
    alert('Faut que tu choissises 1 truc au moin bouffonne');
    return;
  }

  // Afficher la lettre
  document.getElementById('screen-invite').style.display = 'none';
  const letterScreen = document.getElementById('screen-letter');
  letterScreen.classList.add('active');
  letterScreen.classList.add('fade-in');

  const choicesText = selected.join(', ');
  document.getElementById('letter-body').innerHTML = `
    Cassi,<br><br>
    Ton invitation pour le <strong style="color:var(--gold)">samedi 7 mars 2026</strong> est confirmÃ©e.<br><br>
    Pour cette soirÃ©e, tu as choisi : <em style="color:var(--gold-light)">${choicesText}</em>.<br><br>
    Je t'attendrai Ã  14h30 chez moi.  Ã€ Samedi 7 mars ğŸ˜<br><br>
  `;

  sendDiscord(selected, yesCount, noCount);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DISCORD WEBHOOK
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function sendDiscord(choices, yes, no) {
  if (DISCORD_WEBHOOK === "COLLE_TON_WEBHOOK_DISCORD_ICI") return;

  const body = {
    embeds: [{
      title: "ğŸ’Œ Invitation acceptÃ©e !",
      color: 0x8B0000,
      fields: [
        { name: "âœ… Choix pour la soirÃ©e", value: choices.join(', ') || "Aucun", inline: false },
        { name: "ğŸ’• Fois oÃ¹ elle a dit Oui",    value: String(yes), inline: true },
        { name: "ğŸ’” Fois oÃ¹ elle a cliquÃ© Non", value: String(no),  inline: true },
        { name: "ğŸ“… Date",                       value: "Samedi 7 mars 2026", inline: false },
      ],
      footer: { text: "Elle a acceptÃ© l'invitation â™¥" },
      timestamp: new Date().toISOString(),
    }]
  };

  fetch(DISCORD_WEBHOOK, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(body),
  }).catch(console.error);
}
</script>
</body>
</html>
